<cds-breadcrumb></cds-breadcrumb>

<nz-card nzTitle="选择通知方式" [nzLoading]="loading">
  <nz-list [nzDataSource]="cfg" [nzRenderItem]="defaultItem">
    <ng-template #defaultItem let-item let-i="index">
      <nz-list-item>
        <div class="wrp">
          <label class="cb" nz-checkbox [(nzChecked)]="item.enabled" [nzDisabled]="i >= 2"></label>
          <span class="name">{{ item.name }}</span>
          <span class="desc">{{ item.desc }}</span>
          <a *ngIf="item.advance" class="adv" [class.link-disable]="i >= 2" (click)="onItemSettingClicked(i)">设置</a>
        </div>
      </nz-list-item>
    </ng-template>
  </nz-list>

  <nz-divider nzType="horizontal"></nz-divider>

  <div nz-row nzType="flex" nzJustify="center">
    <button nz-button nzType="default" type="default" class="pl-lg pr-lg" (click)="location.back()">返回
    </button>
    <button nz-button nzType="primary" type="submit" class="pl-lg pr-lg" [nzLoading]="submitLoading" (click)="save()">提交
    </button>
  </div>
</nz-card>

<nz-modal [(nzVisible)]="mailSettingV" nzTitle="邮件发送设置" (nzOnOk)="mailFormSubmit()" (nzOnCancel)="mailSettingV = false">
  <form #mf nz-form [formGroup]="mailForm" se-container="1" labelWidth="120">
    <se label="SMTP地址" required>
      <input nz-input formControlName="smtpHost" />
    </se>
    <se label="SMTP端口" required>
      <input nz-input formControlName="smtpPort" />
    </se>
    <se label="发信人邮箱" required>
      <input nz-input formControlName="smtpMail" />
    </se>
    <se label="发信用户名" required>
      <input nz-input formControlName="smtpUsername" />
    </se>
    <se label="发信密码" required>
      <input nz-input formControlName="smtpPassword" />
    </se>
  </form>
</nz-modal>